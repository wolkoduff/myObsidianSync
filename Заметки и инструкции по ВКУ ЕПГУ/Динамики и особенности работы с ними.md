Есть много примеров работы с динамическими элементами, такими как "Динамическое формирование выпадающего списка/квиза"
Про динамическое формирование выпадающего списка - тут зависит от степени извращения разработчика над заявителем (делать с возможностью поиска или нет)
Всё остаётся на вашей совести, меня сюда не впутывайте, я делюсь тем, что накопил дабы упростить вам жизнь (пожалейте себя, пожалуйста, вы итак попали в тяжёлую историю, которая активно развивается через наши страдания)
Как говорится: через тернии к звёздам, так и мы на госуслуги через костыли и страдания
![[Стартуем!.png]]

# Динамическое формирование квиза и особенности работы с ним
Есть вот такой шаблон у нас на ВКУ [Динамическое отображение кнопок в QuestionScr (квиз) 1.0.6](https://vku.test.gosuslugi.ru/template/2777/1.0.6)
Если он не доступен по ссылке выше, просто поменяйте версию либо поищите в шаблонах
Для того, чтобы сформировать список, необходимо определиться со следующими деталями:
* сколько будет кнопок
* какие будут условия для отображения тех или иных кнопок
* Какой будет порядок для генерации кнопок
Нам предлагают в шаблоне такой вариант смотреть и делать также (Потому что шаблон не всегда для тупого копирования и вставки в свои услуги, это шаблон, чтобы посмотреть и повторить интегрировать самим):
![[Шаблон динамического квиза.png]]
Содержимое описания:
```json
{
    "linkedValues": [
        {
            "argument": "kolvo",
            "jsonLogic": {
                "if": [
                    {
                        "==": [
                            "answer.sc2_2777.value",
                            2
                        ]
                    },
                    "[{\"title\":\"Кнопка 1\",\"code\":\"1\"},{\"title\":\"Кнопка 2\",\"code\":\"2\"}]",
                    {
                        "==": [
                            "answer.sc2_2777.value",
                            3
                        ]
                    },
                    "[{\"title\":\"Кнопка 1\",\"code\":\"1\"},{\"title\":\"Кнопка 2\",\"code\":\"2\"},{\"title\":\"Кнопка 3\",\"code\":\"3\"}]",
                    {
                        "==": [
                            "answer.sc2_2777.value",
                            4
                        ]
                    },
                    "[{\"title\":\"Кнопка 1\",\"code\":\"1\"},{\"title\":\"Кнопка 2\",\"code\":\"2\"},{\"title\":\"Кнопка 3\",\"code\":\"3\"},{\"title\":\"Кнопка 4\",\"code\":\"4\"}]",
                    {
                        "==": [
                            "answer.sc2_2777.value",
                            5
                        ]
                    },
                    "[{\"title\":\"Кнопка 1\",\"code\":\"1\"},{\"title\":\"Кнопка 2\",\"code\":\"2\"},{\"title\":\"Кнопка 3\",\"code\":\"3\"},{\"title\":\"Кнопка 4\",\"code\":\"4\"},{\"title\":\"Кнопка 5\",\"code\":\"5\"}]",
                    {
                        "==": [
                            "answer.sc2_2777.value",
                            6
                        ]
                    },
                    "[{\"title\":\"Кнопка 1\",\"code\":\"1\"},{\"title\":\"Кнопка 2\",\"code\":\"2\"},{\"title\":\"Кнопка 3\",\"code\":\"3\"},{\"title\":\"Кнопка 4\",\"code\":\"4\"},{\"title\":\"Кнопка 5\",\"code\":\"5\"},{\"title\":\"Кнопка 6\",\"code\":\"6\"}]"
                ]
            }
        }
    ]
}
```
Как видим из кода выше - минимум 2 кнопки заставят добавить, а как максимум - 6
Как надо будет описать простоту в обращении к квизу, который должен будет быть сформирован динамически:
![[Настройка квиза динамика по ответам.png]]
А вот что будет для подстановки вместо ${NAME} слов или текста
![[Подстановка текста в значения.png]]
Если втупую копипастить, то можно упустить важный нюанс - никто не запрещает прописать свои ссылки для подсказки, сохраняемого значения, и ваще любой другой текст. Почему title? Да потому что так прописано в калькуляторе формирования массива кнопок - отображаемое title, сохраняемое code!
```json
[{\"title\":\"Кнопка 1\",\"code\":\"1\"},{\"title\":\"Кнопка 2\",\"code\":\"2\"},{\"title\":\"Кнопка 3\",\"code\":\"3\"}]
```
Или если раскрыть кавычки, то вот такой текст получается в содержимом компонента:
```json
[
    {
        "title": "Кнопка 1",
        "code": "1"
    },
    {
        "title": "Кнопка 2",
        "code": "2"
    },
    {
        "title": "Кнопка 3",
        "code": "3"
    }
]
```
И в шаблоне, если смотреть дальше, есть лишний экран, который я также раньше в тупую копировал и обращался, но на мой взгляд - **излишне**:
![[После квиза вытянуть его значение излишне.png]]
Почему это излишне:
1) Квиз обычно в правилах идёт без атрибута, а тут указываем, что наш квиз динамический далеко не динамический, а хранит два атрибута - title и code
2) 