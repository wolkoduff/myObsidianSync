{
	"nodes":[
		{"id":"6c3371eb4b6cdb97","type":"file","file":"Заметки и инструкции по ВКУ ЕПГУ/Как вычислять возраст детей через калькулятор.md","x":-2920,"y":-1080,"width":980,"height":2200},
		{"id":"bc8fa910b04d098f","type":"file","file":"Заметки и инструкции по ВКУ ЕПГУ/2025-06-10 Обращения к RestCall компоненту со справочниками.md","x":-1900,"y":-1080,"width":1400,"height":24740},
		{"id":"d6e11e02cf246853","type":"file","file":"Заметки и инструкции по ВКУ ЕПГУ/Витрина СФР массовый вызов с картинками.md","x":-420,"y":-1080,"width":1440,"height":32660},
		{"id":"2e65651461ab94c1","type":"text","text":"# Как смотреть логи с История заявления от ВКУ\nНа примере заявления 4650999050 https://vku.test.gosuslugi.ru/history/?orderId=4650999050\nКак обычно, смотрим, что же там такое есть или нет, и как оно к нам приходит. \n![[Pasted image 20250612231937.png]]\nНа первый взгляд, текущий статус скажет о многом, но не тут-то было, внимательно смотрим на список справа вверху из пунктов меню и видим, что у нас проблема: оно даже до СМЭВ-а не дошло\nТогда идём смотреть логи\n![[Pasted image 20250612232127.png]]\nА в логах уже становится понятнее, что что-то пошло не так\n![[Pasted image 20250612232148.png]]\n6 записей и все с log.level ERROR, т.е. ошибка\nСмотрим первый из них, в котором нас интересует уже блок message\n![[Pasted image 20250612232320.png]]\nВот в нём и будет описание ошибки, что же пошло не так и не дошло до отправки в СМЭВ\nНо может быть и другая ошибка, на примере заявления https://vku.test.gosuslugi.ru/history/?orderId=4650999692\n![[Pasted image 20250612232552.png]]\nА там уже смотрим не на message, т.к. он будет малоинформативен, а ниже\n![[Pasted image 20250612232625.png]]\nДля более точного обращения (из суперчата ВКУ)\n![[Pasted image 20250612232646.png]]\nПочему такое может быть, а потому что кто-то немного накосячил, и прописал в spConfig шаблону не то правило\n![[Pasted image 20250612232733.png]]\nРешение: *в spConfig надо поправить атрибут attachmentType с lk на request*","x":-3960,"y":-1080,"width":980,"height":4620},
		{"id":"45884fe31ef8e58a","type":"text","text":"# Ошибки и возможные пути их разрешения\n## Список ожидает 2 аргумента, а передан только один\nСообщение об ошибке будет выглядеть так:\n![[Pasted image 20250612234730.png]]\nНо при детальном рассмотрении можно заметить, что ответ нам дали в лог об ошибке\n![[Pasted image 20250612234257.png]]\nКогда в правиле перехода прописано, что сравнивать \"Находится в списке\", а аргумент только один. Список - это минимум 2 значения\n![[Pasted image 20250612234419.png]]\nТ.е. для таких случаев, используем операцию сравнения \"Равно\" (строго) или \"Совпадает\" (регулярки можно ставить)\n\nОшибка в калькуляторе или проверка значения без getIf()\nТекст ошибки:\n```json\nError while processing object from json: Unrecognized token 'empty': was expecting (JSON String, Number, Array, Object or token 'null', 'true' or 'false')\\n at [Source: (String)\\\"empty\\\"; line: 1, column: 6]\n```\nО чём эта ошибка нам говорит: кто-то накосячил и не проверил, а существует ли ваще компонент?\nВозможное решение:\n```json\narg1: \"'${c2}' != 'empty' ? '${c2}' : ''\"\n```\nЕсли вдруг калькулятор по повторяшке и внутренним значениям по фильтру не хочет работать, то стоит посмотреть, что же делается не так:\nТак оно не работает корректно и падает в ошибку\n```json\n{\n    \"linkedValues\": [\n        {\n            \"version\": 2,\n            \"argument\": \"massiv\",\n            \"definition\": {\n                \"expression1\": \"arg1.size() > 0\",\n                \"arg1\": \"asList('${c128.[*].c312.[?(@.id == '2')]}')\"\n            }\n        }\n    ]\n}\n\n```\nЧто надо заменить или как:\n```json\nasList('${c128.[?(@.c312 == \\\"2\\\")]}')\"\n```\nЧто мы делает: фильтруем компонент `c128` через правило: c312 должно быть равно 2, т.к. c312 - это у нас квиз в повторяшке, а он простой как 2 рубля и не формируется динамически","x":1060,"y":-1080,"width":1600,"height":2680},
		{"id":"8e81c30a0d5a31b1","x":2720,"y":-1080,"width":1480,"height":13240,"type":"file","file":"Заметки и инструкции по ВКУ ЕПГУ/Некоторые извращения на ВКУ или как мы это сделали, божечки-кошечки.md"},
		{"id":"cb978f728433abff","type":"file","file":"Pasted image 20250613002403.png","x":1060,"y":1640,"width":1600,"height":1600},
		{"id":"07a351954a638333","x":1060,"y":3260,"width":1580,"height":3500,"type":"text","text":"# Когда полезно использовать в сложных компонентах выпадающих списков не text и id, а originalItems\n\nПример, когда в справочник загрузили всю нужную информацию, а маппинг настроен не совсем корректно:\n```json\n[\n    {\n        \"value\": \"11\",\n        \"title\": \"1\",\n        \"isLeaf\": true,\n        \"children\": [],\n        \"attributes\": [\n            {\n                \"name\": \"key\",\n                \"type\": \"LONG\",\n                \"value\": {\n                    \"asLong\": 11,\n                    \"typeOfValue\": \"LONG\",\n                    \"value\": 11\n                },\n                \"valueAsOfType\": 11\n            },\n            {\n                \"name\": \"federal_district\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"1\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"1\"\n                },\n                \"valueAsOfType\": \"1\"\n            },\n            {\n                \"name\": \"name_reg\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"Г. Москва\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"Г. Москва\"\n                },\n                \"valueAsOfType\": \"Г. Москва\"\n            },\n            {\n                \"name\": \"oktmo\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"45000000\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"45000000\"\n                },\n                \"valueAsOfType\": \"45000000\"\n            },\n            {\n                \"name\": \"code\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"45\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"45\"\n                },\n                \"valueAsOfType\": \"45\"\n            },\n            {\n                \"name\": \"subject_code\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"77\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"77\"\n                },\n                \"valueAsOfType\": \"77\"\n            },\n            {\n                \"name\": \"name\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"МУ РПН по г. Москве и Калужской области\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"МУ РПН по г. Москве и Калужской области\"\n                },\n                \"valueAsOfType\": \"МУ РПН по г. Москве и Калужской области\"\n            },\n            {\n                \"name\": \"full_name\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"Межрегиональное управление Федеральной службы по надзору в сфере природопользования по г. Москве и Калужской области\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"Межрегиональное управление Федеральной службы по надзору в сфере природопользования по г. Москве и Калужской области\"\n                },\n                \"valueAsOfType\": \"Межрегиональное управление Федеральной службы по надзору в сфере природопользования по г. Москве и Калужской области\"\n            },\n            {\n                \"name\": \"address\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"117105, Москва, Варшавское ш., 39А\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"117105, Москва, Варшавское ш., 39А\"\n                },\n                \"valueAsOfType\": \"117105, Москва, Варшавское ш., 39А\"\n            },\n            {\n                \"name\": \"inn\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"7724559170\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"7724559170\"\n                },\n                \"valueAsOfType\": \"7724559170\"\n            },\n            {\n                \"name\": \"kpp\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"772401001\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"772401001\"\n                },\n                \"valueAsOfType\": \"772401001\"\n            },\n            {\n                \"name\": \"ORG_ID\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"10002630497\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"10002630497\"\n                },\n                \"valueAsOfType\": \"10002630497\"\n            },\n            {\n                \"name\": \"code0\",\n                \"type\": \"STRING\",\n                \"value\": {\n                    \"asString\": \"67\",\n                    \"typeOfValue\": \"STRING\",\n                    \"value\": \"67\"\n                },\n                \"valueAsOfType\": \"67\"\n            }\n        ],\n        \"attributeValues\": {\n            \"subject_code\": \"77\",\n            \"ORG_ID\": \"10002630497\",\n            \"code\": \"45\",\n            \"address\": \"117105, Москва, Варшавское ш., 39А\",\n            \"code0\": \"67\",\n            \"inn\": \"7724559170\",\n            \"kpp\": \"772401001\",\n            \"federal_district\": \"1\",\n            \"full_name\": \"Межрегиональное управление Федеральной службы по надзору в сфере природопользования по г. Москве и Калужской области\",\n            \"oktmo\": \"45000000\",\n            \"name\": \"МУ РПН по г. Москве и Калужской области\",\n            \"name_reg\": \"Г. Москва\",\n            \"key\": 11\n        }\n    }\n]\n```\nДля отображения выбрали title, а сохраняемое value, хотя хотели бы видеть *Межрегиональное управление Федеральной службы по надзору в сфере природопользования по г. Москве и Калужской области* или хотя бы *МУ РПН по г. Москве и Калужской области*\nНо судя по ответу - это RestCall запрос для справочника, а вот его мы уже разбирали"},
		{"id":"fb6e06fd626997be","x":1060,"y":6800,"width":1580,"height":5740,"type":"text","text":"# Ещё немного про зависимости компонентов друг от друга\nВ примере ниже, мы хотим скрывать какой-то компонент, если в мультике выбрано значение, у которого сохраняемое значение (идентификатор) равен 3\n![[Pasted image 20250613004041.png]]\nАтрибут компонента можно было бы оставить в первозданном виде, как на скриншоте выше, но это актуально только если компоненты на одном экране. И это ненадёжно (ауф и прочие приколы про пацанские цитатники🐺)\nКак можно обходить:\n1) прописывать `value.list[*].id`\n2) Переносим в путь к значению компонента\nПочему оно так сделано - курить документацию или спрашивать через СЦ у разработчиков, почему оно так работает, и хорошо, что оно работает\n# Некоторые экзотические моменты и зависимости между собой компонентов\nЕсть такие специфичные случаи, когда мы хотим помочь заявителю в заполнении заявления, например, через RestCall запрос мы вытягиваем его идентификатор, и хотим отобразить на форме, лучше всего в labelSection\nНиже будет показано, как это можно сделать, без мам, пап, СЦ и кредитов\n![[Pasted image 20250613004555.png]]\nНикакие больше части этого компонента не трогаем, оставляем как есть\n![[Pasted image 20250613004622.png]]\nВсё, что нужно вбить. \n`c50.items.[0].attributeValues.ParticipantId` - это обращение к единственной записи массива restCall запроса, у которой нас интересует блок attributeValues, в котором хранится заветный ParticipantId\n# Справочник в ЕСНСИ заводить избыточно, хоть и надёжно, но мы хотим дополнять нужными нам  атрибутами, а в зависимости от выбранного значения в выпадашке, мы хотим менять заголовок компонента\n\nОдна из самых специфичных задач, которые я когда-либо реализовывал - сделать выпадашку, а в зависимости от выбранного значения мы будем менять заголовок компонента\nПричём также, два или три уровня вложенности (в итоге вышло 5)\n"}
	],
	"edges":[]
}